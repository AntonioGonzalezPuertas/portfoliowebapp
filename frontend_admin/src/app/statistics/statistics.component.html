<mat-card class="statistics-card" appearance="outlined">
  <mat-card-header>
    <mat-card-title>Statistiques Globales</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="statistics-content">
      <div class="stat-item" (click)="toggleLineChart('users')">
        <mat-icon color="primary">group</mat-icon>
        <div class="stat-item-text">
          @if (users.length > 0) {
          <h3>{{ users.length }}</h3>
          }
          <p>Utilisateurs inscrits</p>
        </div>
        <app-doughnut-chart
          [chartData]="userTechChartDataObject"
        ></app-doughnut-chart>
      </div>
      <!-- TO ADD MORE STATS
      <div class="stat-item" (click)="toggleLineChart('active')">
        <mat-icon color="primary">show_chart</mat-icon>
        <div class="stat-item-text">
          <h3>320</h3>
          <p>Utilisateurs actifs cette semaine</p>
        </div>
        <app-doughnut-chart></app-doughnut-chart>
      </div>

      <div class="stat-item" (click)="toggleLineChart('growth')">
        <mat-icon color="primary">trending_up</mat-icon>
        <div class="stat-item-text">
          <h3>+12%</h3>
          <p>Croissance des utilisateurs</p>
        </div>
        <app-doughnut-chart></app-doughnut-chart>
      </div>
    -->



      <div class="stat-item" (click)="toggleLineChart('projects')">
        <mat-icon color="primary">trending_up</mat-icon>
        <div class="stat-item-text">
          <h3>@if (projects.length > 0) {
            {{ projects.length }}
          }</h3>
          <p>Nombre de Projets</p>
        </div>
        <app-doughnut-chart
          [chartData]="doughnutChartDataObject"
        ></app-doughnut-chart>

      </div>

          <!-- Nouveau stat -->

    <div class="stat-item" (click)="toggleLineChart('active')">
      <mat-icon color="primary">show_chart</mat-icon>
      <div class="stat-item-text">
        <h3>@if ( sessions.length > 0) {
        {{ sessions.length }}  
        }
        </h3>
        <p>Nombre de sessions</p>
      </div>
      <app-doughnut-chart
        [chartData]="sessionsChartDataObject"
      ></app-doughnut-chart>
    </div>

    <div class="stat-item" (click)="toggleLineChart('active')">
      <mat-icon color="primary">show_chart</mat-icon>
      <div class="stat-item-text">
        <h3>@if (onlineSessions.length>0)
          {
            {{onlineSessions.length }}
          }
        </h3>
        <p>Nombre d'utilisateurs en ligne</p>
      </div>
      <app-doughnut-chart
        [chartData]="onlineSessionsChartDataObject"
      ></app-doughnut-chart>
    </div>

    </div>

    @if (showLineChart) {
      <div class="period-buttons">
        <button mat-button [color]="period === 'day' ? 'primary' : undefined" (click)="setPeriod('day')">Day</button>
        <button mat-button [color]="period === 'week' ? 'primary' : undefined" (click)="setPeriod('week')">Week</button>
        <button mat-button [color]="period === 'month' ? 'primary' : undefined" (click)="setPeriod('month')">Month</button>
      </div>
      <app-line-chart
        [labels]="lineChartLabels"
        [data]="lineChartCounts"
        [title]="selectedKey === 'projects' ? 'Projects Over Time' : 'User Registrations Over Time'">
      </app-line-chart>
    }
  </mat-card-content>
</mat-card>
